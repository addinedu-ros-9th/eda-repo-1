![배너](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/banner.png?raw=true)

# 🚲 서울시 공공자전거 수요 예측 및 분석

## 1. 프로젝트 개요

이 프로젝트는 **탐색적 데이터 분석(EDA)** 을 기반으로, 서울시 공공자전거 서비스인 **따릉이**의 **수요 예측**과 **신규 대여소 설치 위치 추천** 기능을 구현하기 위한 데이터 분석 프로젝트입니다.

![1-1](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/1-1.png?raw=true)
![1-2](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/1-2.png?raw=true)

서울시 따릉이는 현재 서울시민 10명 중 4명이 이용할 정도로 일상에 깊숙이 자리 잡은 교통수단이지만, **대여소별 자전거 부족 문제**는 여전히 해결되지 않은 과제로 남아 있습니다.

따릉이는 **One-Way 방식**으로 운영되어, 사용자가 **어디서든 대여하고 다른 곳에 반납**할 수 있습니다. 이러한 구조로 인해 특정 대여소에서는 **공급 부족**, 다른 대여소에서는 **자전거 과잉** 문제가 반복적으로 발생합니다.

> ### 운영상 문제점
> - **자전거가 항상 부족한 대여소**
> - **자전거가 방치되어 넘치는 대여소**
> - **수요 급증 시 즉각적인 대응이 어려운 운영 체계**
  

현재는 수량 기준 초과/미달 상황에 따라 자전거를 회수하거나 옮기는 **사후적 대응 방식**으로만 운영되고 있으며, 이는 **예측이 없는 수동적 운영**이기 때문에 **실시간 수요 변화에 선제적으로 대응하기 어려운 구조**입니다.

---

## 2. 프로젝트 목적 / 필요성

이러한 문제를 해결하기 위해서는 **데이터 기반 수요 예측 모델링**과 이를 바탕으로 한 **운영 전략 수립**이 필요합니다.

1. 다양한 요인(기상, 고도, 인구, 교통 등)을 반영한 정교한 **수요 예측 모델** 구축
2. 이를 바탕으로 다음 기능 구현:
   - **시간대별·대여소별 수요 예측** → 선제적 자전거 재배치
   - **장소 기반 수요 예측** → 신규 대여소 설치 위치 추천

> 궁극적으로 이 프로젝트는 "어디에, 언제 자전거가 필요할지"를 예측하여  
> 공공자전거 운영을 **더 효율적으로 만드는 것**을 목표로 합니다.

---

## 3. 기술 스택

**(추가 예정)**  
- Python, MySQL, Pandas, XGBoost, PyQt5, Folium 등

---

## 4. 데이터베이스 구성 및 출처

**(추가 예정)**  
- 서울시 공공데이터포털, 기상청, 서울열린데이터광장 등

---

## 5. EDA

**(추가 예정)**  
- 시간대별/요일별 수요 분석  
- 고도, 기온, 교통 인프라와의 상관관계 시각화 등

---

## 6. 기능 설명

### 🚴‍♀️ SR_01. 대여소별 시간대별 수요 예측

- XGBoost 기반 회귀 모델 사용
- 입력: 대여소 ID, 날짜, 시간, 기온, 풍속 등
- 출력: 예상 대여량 숫자 (GUI로 실시간 확인)

![SR_01_출력화면](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/6-1.png?raw=true)

### 🗺 SR_02. 신규 대여소 설치 위치 추천

- 지정된 좌표 범위 내 격자 후보지 생성
- 위치 특성 기반 수요 예측 모델 적용
- 예측값 상위 후보지 지도에 마커로 시각화

![SR_02_출력화면](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/6-2.png?raw=true)

---

## 7. 모델 설명 및 성능

본 프로젝트는 시간 기반 수요 예측(SR_01)과 공간 기반 설치 위치 추천(SR_02)이라는 두 가지 기능을 중심으로, 각각에 최적화된 모델을 구축하였습니다. 주요 성능 평가지표는 RMSE, MAE, (S)MAPE, R² 등을 활용하였으며, 아래와 같은 결과를 도출하였습니다.

### 📍 SR_01 (시간대별 예측)

- **모델**: XGBoost 회귀
- **입력 변수**: 날짜, 시간, 기온, 풍속, 강수량, 습도, 고도, 요일 등
- **출력 변수**: 시간대별 대여량

![모델](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/7-1.png?raw=true)

| 지표 | 값 |
|------|----|
| RMSE | 9.60 |
| MAE  | 6.66 |
| MAPE | 23.24% |
| R²   | 0.835 |

- 전체 구간 대비 실수요 구간에서 MAPE가 크게 개선되어, 실제 운영에 적합한 수준의 정밀도를 확보함  
- R² = 0.860으로, 주요 변수들이 수요 변동을 충분히 설명하고 있음

---

### 🗺 SR_02 (설치 위치 예측)

- **모델**: 3-Stage XGBoost 모델 (수요 구간별 분리 학습)
- **입력 변수**: 위도, 경도, 고도, 주변 인구, 유동 인구, 교통 접근성, 상업시설 수 등
- **출력 변수**: 일 평균 대여 수요 예측값

![모델](https://github.com/addinedu-ros-9th/eda-repo-1/blob/main/img/7-2.png?raw=true)

| 지표 | 값 |
|------|----|
| RMSE  | 20.49 |
| MAE   | 12.60 |
| MAPE  | 41.59% |
| SMAPE | 33.96% |
| R²    | 0.761 |

- 위치 기반 변수만을 활용했음에도 R²가 0.76으로, 공간적 수요 분포를 파악하는 데 충분한 설명력을 보임  
- 절대적 예측 정확도보다는 후보지 간 **상대적 수요 비교**에 유용하며, 입지 전략 수립 시 **실제 의사결정에 도움이 될 수 있음**  
- 다만, **고수요 대여소(일수요 > 100)** 에 대해서는 성능 개선 필요

---

### ✅ 기능별 성능 요약

| 기능 | 설명 | R² | MAPE / SMAPE | 활용 가능성 |
|------|------|----|----------------|---------------|
| **SR_01** | 시간대별 수요 예측 | **0.860** | **23.2%** (실수요 기준) | 실시간 운영에 활용 가능 |
| **SR_02** | 설치 위치 수요 예측 | **0.761** | **33.96%** (SMAPE) | 입지 전략 수립에 활용 가능 |

> **SR_01은 실수요 중심의 정밀 예측**,  
> **SR_02는 상대적 수요 비교 기반의 전략 지원 도구**로 작동하며  
> **현장 운영 및 정책 수립 모두에 활용 가능한 수준의 성능을 확보**하였습니다.


---

## 8. 고찰 및 한계

### 8-1. 고수요 대여소가 예측 어려운 구조적 이유
#### **비선형적 스케일 효과 (threshold effect)**
- 고수요 대여소는 단순히 "지하철역이 가깝다" 하나만으로 설명되지 않음
- **특정 feature 조합이 임계치를 넘을 때** 수요가 폭발적으로 증가하는 경향이 있음
- 회귀 모델이 패턴을 포착하기 어려울 수 있음

#### **고수요 대여소는 지역 맥락이 특수할 수 있음**
- 서울숲, 여의도공원, 강남역 주변 → 고수요지만 매우 특화된 입지 조건
- 이건 **데이터에 있는 일반적인 feature로는 잘 반영되지 않음** (랜드마크, 관광, 업무 밀집도, 브랜드, 정책 등)
---

## 9. 디렉토리 구조

**(추가 예정)**

---

## 10. 실행 방법

**(추가 예정)**

---

## 11. 팀 소개

| 이름 | 역할 |
|------|------|
| 장진혁 | 프로젝트 총괄, DB 구축, SR_01/SR_02 모델 설계 및 구현 |
| 김대인 | (작성 예정) |
| 김민수 | 대중교통 접근성 분석, 데이터 병합 및 문서화 |
| 김범진 | 가설 수립, 공공데이터 수집 자동화, 시각화 작업 |

---


